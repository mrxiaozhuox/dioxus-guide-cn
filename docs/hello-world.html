<!doctype html><html class="" data-reactroot=""><head>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" property="og:title" content="“Hello World” 桌面程序 · Dioxus 开发指南"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>
<title data-react-helmet="true">“Hello World” 桌面程序 · Dioxus 开发指南</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><header><h1 class="hide_on_mobile"><a href="/">Dioxus 开发指南</a></h1><nav><ul><li class="show_on_mobile flex_center"><a class="czs-menu-l" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a></li><li class="show_on_mobile"><h1 class="mobile_title"><a href="/">Dioxus 开发指南</a></h1></li><li class="hide_on_mobile"><a href="https://dioxuslabs.com/">官网</a></li><li style="flex-grow:1"></li><li class="flex_center"><a class="czs-github-logo" href="http://github.com/mrxiaozhuox/dioxus-guide-cn" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul></nav></header><aside class="sidebar"><ol class="list_style_none"><li class=""><a href="/index.html" class="nav_link">介绍</a></li><li class=""><a href="/docs/setup.html" class="nav_link">安装</a></li><li class=""><a href="/docs/hello-world.html" class="nav_link">入门</a></li><li class="unfold"><a href="/docs/ui/index.html" class="nav_link">UI设计<span class="czs-angle-up-l" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></span><span class="czs-angle-down-l" style="background-image:url(&quot;/assets/czs-angle-down-l.svg&quot;)"></span></a><ol class="list_style_none" style="height:auto"><li class=""><a href="/docs/ui/vnodes.html" class="nav_link">元素介绍</a></li><li class=""><a href="/docs/ui/conditional-render.html" class="nav_link">条件渲染</a></li><li class=""><a href="/docs/ui/lists.html" class="nav_link">列表渲染</a></li><li class=""><a href="/docs/ui/special-attributes.html" class="nav_link">特殊属性</a></li></ol></li><li class="unfold"><a href="/docs/components/index.html" class="nav_link">组件封装<span class="czs-angle-up-l" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></span><span class="czs-angle-down-l" style="background-image:url(&quot;/assets/czs-angle-down-l.svg&quot;)"></span></a><ol class="list_style_none" style="height:auto"><li class=""><a href="/docs/components/properties.html" class="nav_link">组件属性</a></li><li class=""><a href="/docs/components/children-attributes.html" class="nav_link">传递子元素和属性</a></li></ol></li></ol></aside><section class="main"><div class="main_article"><article><h1>“Hello World” 桌面程序</h1>
<p>让我们通过一个简单的 <code>Hello World</code> 程序来学习 Dioxus 的基本使用吧！</p>
<p>在本章节中，我们将讨论：</p>
<ul>
<li>通过 Cargo 创建一个新项目</li>
<li>添加 Dioxus 工具包到新项目中</li>
<li>启动属于我们的第一个 Dioxus 桌面程序</li>
</ul>
<h2 id="%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">创建项目<a class="anchor" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">§</a></h2>
<p>首先，让我们开始一个新的项目，Rust 中有两种程序：二进制程序 <code>main.rs</code> 和库程序 <code>lib.rs</code>，
而在这里，我们需要的是一个二进制可运行的程序（bin），所以说我们的创建命令为：</p>
<pre class="language-autoit"><code class="language-autoit">cargo new <span class="token operator">-</span><span class="token operator">-</span>bin hello<span class="token operator">-</span>dioxus
</code></pre>
<p>现在我们可以通过 <code>cd</code> 命令进入文件夹了：</p>
<pre class="language-autoit"><code class="language-autoit">$ cd hello<span class="token operator">-</span>dioxus
$ tree
<span class="token punctuation">.</span>
├── Cargo<span class="token punctuation">.</span>toml
├── <span class="token punctuation">.</span>git
├── <span class="token punctuation">.</span>gitignore
└── src
    └── main<span class="token punctuation">.</span>rs
</code></pre>
<p><code>Cargo</code> 初始化的 文件/文件夹 有：Git仓库信息、Cargo.toml Cargo的配置文件、src文件夹 存放代码的目录。<code>main.rs</code> 则是整个应用的入口了！
当我们的程序被运行是，则会调用 <code>main.rs</code> 中的 <code>main</code> 函数。</p>
<h3 id="%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95">代码目录<a class="anchor" href="#%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95">§</a></h3>
<pre class="language-autoit"><code class="language-autoit">$ cat src<span class="token operator">/</span>main<span class="token punctuation">.</span>rs
</code></pre>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>当代码被运行时，<code>Println!</code> 宏会向终端打印一个 <code>Hello, world!</code>。</p>
<pre class="language-autoit"><code class="language-autoit">$ cargo run
   Compiling hello<span class="token operator">-</span>dioxus v0<span class="token punctuation">.</span><span class="token number">1.0</span>
    Finished dev <span class="token punctuation">[</span>unoptimized <span class="token operator">+</span> debuginfo<span class="token punctuation">]</span> <span class="token function">target</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span>41s
     Running `target<span class="token operator">/</span>debug<span class="token operator">/</span>hello<span class="token operator">-</span>dioxus`
Hello<span class="token punctuation">,</span> world!
</code></pre>
<h3 id="%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE">应用配置<a class="anchor" href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE">§</a></h3>
<p><code>Rust</code> 项目的依赖管理、项目信息都在 <code>Cargo.toml</code> 文件中保存。</p>
<pre class="language-autoit"><code class="language-autoit">$ cat Cargo<span class="token punctuation">.</span>toml
</code></pre>
<pre class="language-autoit"><code class="language-autoit"><span class="token punctuation">[</span>package<span class="token punctuation">]</span>
name <span class="token operator">=</span> <span class="token string">"hello-dioxus"</span>
version <span class="token operator">=</span> <span class="token string">"0.1.0"</span>
edition <span class="token operator">=</span> <span class="token string">"2018"</span>

<span class="token punctuation">[</span>dependencies<span class="token punctuation">]</span>
</code></pre>
<p>它使用 <strong>TOML</strong> 格式，默认情况下没有任何依赖库。</p>
<h4 id="%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E5%BA%93">添加依赖库<a class="anchor" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E5%BA%93">§</a></h4>
<p>如果你已经安装了 <code>cargo-edit</code> 拓展命令，你可以很轻松的添加一个依赖到你的 <code>Cargo.toml</code> 中：</p>
<pre class="language-autoit"><code class="language-autoit">$ cargo add dioxus <span class="token operator">-</span><span class="token operator">-</span>features desktop
</code></pre>
<p>将 <code>features</code> desktop 引入项目中是非常重要的，<code>dioxus</code> 就像一个包装盒，里面有很多各种各样的支持 <code>Feature</code>。
如果这个项目用于 <code>Desktop</code> 开发，那么你就需要加入这个 <code>Feature</code> 才能使用它。</p>
<h2 id="%E7%AC%AC%E4%B8%80%E4%B8%AA-dioxus-%E9%A1%B9%E7%9B%AE">第一个 Dioxus 项目<a class="anchor" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-dioxus-%E9%A1%B9%E7%9B%AE">§</a></h2>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">dioxus<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">dioxus<span class="token punctuation">::</span>desktop<span class="token punctuation">::</span></span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token class-name">App</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">App</span><span class="token punctuation">(</span>cx<span class="token punctuation">:</span> <span class="token class-name">Scope</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
    cx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token macro property">rsx!</span> <span class="token punctuation">(</span>
        div <span class="token punctuation">{</span> <span class="token string">"Hello, world!"</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>使用 <code>cargo run</code> 就能运行这个项目啦。
不出意外的话，它是这个样子的：</p>
<p><img src="https://dioxuslabs.com/guide/images/helloworld.png" alt="HELLOWORLD_IMG"></p>
<h3 id="%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81">解析代码<a class="anchor" href="#%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81">§</a></h3>
<p><code>use</code> 命令会将目标包中的模块中导入到本程序中，而上方代码则是将 <code>dioxus</code> 下的 <code>prelude</code> 中的内容全部引入文件。
它包含了 <code>Dioxus</code> 项目中常用的所有功能。</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">use</span> <span class="token namespace">dioxus<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
</code></pre>
<p>这个初始化代码会在一个线程上启动Tokio运行时，你的代码将在这个线程上运行。
然后，WebView 渲染器将在主线程上启动。此时主线程会被应用程序的事件循环阻塞。</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token namespace">dioxus<span class="token punctuation">::</span>desktop<span class="token punctuation">::</span></span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token class-name">App</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>最后，我们定义了一个组件。在 Dioxus 中每个组件都是一个函数，它会返回一个 Element 对象，用于最终渲染。</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function-definition function">App</span><span class="token punctuation">(</span>cx<span class="token punctuation">:</span> <span class="token class-name">Scope</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
    cx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token macro property">rsx!</span> <span class="token punctuation">{</span>
        div <span class="token punctuation">{</span> <span class="token string">"Hello, world!"</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>    
<span class="token punctuation">}</span>
</code></pre>
<h3 id="scope-%E5%AF%B9%E8%B1%A1">Scope 对象<a class="anchor" href="#scope-%E5%AF%B9%E8%B1%A1">§</a></h3>
<p>Scope 对象来自 React ，在 React 中，你需要用钩子在渲染之间存储数据。
然而，钩子依赖于全局变量，这使得它们很难在服务器呈现等多租户系统中集成。</p>
<p>在 Dioxus 中，Scope 提供了显示的数据处理、获取等方法。它对外提供了渲染、数据获取等功能。</p>
<p>但现在，你只需要知道我们使用 <code>cx.render()</code> 去渲染了一个页面。</p></article></div><aside class="main_toc_container nav_link_container"><div class="main_toc"><nav class="toc"><ol><li><a href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">创建项目</a><ol><li><a href="#%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95">代码目录</a></li><li><a href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE">应用配置</a><ol></ol></li></ol></li><li><a href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-dioxus-%E9%A1%B9%E7%9B%AE">第一个 Dioxus 项目</a><ol><li><a href="#%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81">解析代码</a></li><li><a href="#scope-%E5%AF%B9%E8%B1%A1">Scope 对象</a></li></ol></li></ol></nav></div></aside></section><footer>Powered by&amp;nbsp;<a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><div class="tools flex_center hide_on_mobile"><a class="czs-angle-up-l button" href="#" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></a></div><script src="https://cdn.pagic.org/react@17.0.2/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@17.0.2/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>
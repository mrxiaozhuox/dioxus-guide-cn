<!doctype html><html class="" data-reactroot=""><head>
<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-react-helmet="true" property="og:title" content="列表渲染 · Dioxus 开发指南"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>
<title data-react-helmet="true">列表渲染 · Dioxus 开发指南</title>
<link data-react-helmet="true" rel="stylesheet" href="/assets/index.css"/><link data-react-helmet="true" id="prismTheme" rel="stylesheet" href="/assets/prism.css"/>
<script data-react-helmet="true" >
    const shouldSetIsDark = document.cookie.includes('is_dark=1') ? true : document.cookie.includes('is_dark=0') ? false : window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (shouldSetIsDark) {
      document.documentElement.classList.add('is_dark');
      document.getElementById('prismTheme').href = "/assets/prism_tomorrow.css";
    }
  </script>
</head><body><header><h1 class="hide_on_mobile"><a href="/">Dioxus 开发指南</a></h1><nav><ul><li class="show_on_mobile flex_center"><a class="czs-menu-l" href="#" style="background-image:url(&quot;/assets/czs-menu-l.svg&quot;)"></a></li><li class="show_on_mobile"><h1 class="mobile_title"><a href="/">Dioxus 开发指南</a></h1></li><li class="hide_on_mobile"><a href="https://dioxuslabs.com/">官网</a></li><li style="flex-grow:1"></li><li class="flex_center"><a class="czs-github-logo" href="http://github.com/mrxiaozhuox/dioxus-guide-cn" target="_blank" style="background-image:url(&quot;/assets/czs-github-logo.svg&quot;)"></a></li><li class="toggle_dark flex_center"><span class="czs-sun" style="background-image:url(&quot;/assets/czs-sun.svg&quot;)"></span><span class="czs-sun-l" style="background-image:url(&quot;/assets/czs-sun-l.svg&quot;)"></span><span class="czs-moon" style="background-image:url(&quot;/assets/czs-moon.svg&quot;)"></span><span class="czs-moon-l" style="background-image:url(&quot;/assets/czs-moon-l.svg&quot;)"></span></li></ul></nav></header><aside class="sidebar"><ol class="list_style_none"><li class=""><a href="/index.html" class="nav_link">介绍</a></li><li class=""><a href="/docs/setup.html" class="nav_link">安装</a></li><li class=""><a href="/docs/hello-world.html" class="nav_link">入门</a></li><li class="unfold"><a href="/docs/ui/index.html" class="nav_link">UI设计<span class="czs-angle-up-l" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></span><span class="czs-angle-down-l" style="background-image:url(&quot;/assets/czs-angle-down-l.svg&quot;)"></span></a><ol class="list_style_none" style="height:auto"><li class=""><a href="/docs/ui/vnodes.html" class="nav_link">元素介绍</a></li><li class=""><a href="/docs/ui/conditional-render.html" class="nav_link">条件渲染</a></li><li class=""><a href="/docs/ui/lists.html" class="nav_link">列表渲染</a></li><li class=""><a href="/docs/ui/special-attributes.html" class="nav_link">特殊属性</a></li></ol></li><li class="unfold"><a href="/docs/components/index.html" class="nav_link">组件封装<span class="czs-angle-up-l" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></span><span class="czs-angle-down-l" style="background-image:url(&quot;/assets/czs-angle-down-l.svg&quot;)"></span></a><ol class="list_style_none" style="height:auto"><li class=""><a href="/docs/components/properties.html" class="nav_link">组件属性</a></li></ol></li></ol></aside><section class="main"><div class="main_article"><article><h1>列表渲染</h1>
<p>有什么我们需要将同一组件渲染多次，那我们就可以把它当成一个列表来渲染。</p>
<h2 id="%E9%80%9A%E8%BF%87%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93">通过列表渲染<a class="anchor" href="#%E9%80%9A%E8%BF%87%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93">§</a></h2>
<p>想想我们常用的一些网站：类似于知乎，在主页中会有很多条同样的 <code>文章</code> 块。</p>
<p>它看起来就是这样的：每一个 Post 组件包含了具体内容，但是页面又由多个组件组成。</p>
<pre class="language-rust"><code class="language-rust"><span class="token macro property">rsx!</span><span class="token punctuation">(</span>
    div <span class="token punctuation">{</span>
        <span class="token class-name">Post</span> <span class="token punctuation">{</span><span class="token comment">/* some properties */</span><span class="token punctuation">}</span>
        <span class="token class-name">Post</span> <span class="token punctuation">{</span><span class="token comment">/* some properties */</span><span class="token punctuation">}</span>
        <span class="token class-name">Post</span> <span class="token punctuation">{</span><span class="token comment">/* some properties */</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre>
<p>下面这个例子可以将一个列表渲染为一堆 <code>li</code> 标签：</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"jim"</span><span class="token punctuation">,</span> <span class="token string">"bob"</span><span class="token punctuation">,</span> <span class="token string">"jane"</span><span class="token punctuation">,</span> <span class="token string">"doe"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> name_list <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>name<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">rsx!</span><span class="token punctuation">(</span>
    li <span class="token punctuation">{</span> <span class="token string">"{name}"</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property">rsx!</span><span class="token punctuation">(</span>
    ul <span class="token punctuation">{</span>
        name_list
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre>
<p>上面的代码会先遍历生成单独的 <code>li</code> 标签，再将它全部插入到 <code>ul</code> 中。</p>
<p>它的 HTML 代码会是这样的：</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span> jim <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span> bob <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span> jane <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span> doe <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
</code></pre>
<h2 id="%E8%BF%87%E6%BB%A4%E8%BF%AD%E4%BB%A3%E5%99%A8">过滤迭代器<a class="anchor" href="#%E8%BF%87%E6%BB%A4%E8%BF%AD%E4%BB%A3%E5%99%A8">§</a></h2>
<p>Rust 的迭代器非常强大，特别是用于过滤数据时。在构建用户界面时，您可能希望显示被过滤的项目列表。</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"jim"</span><span class="token punctuation">,</span> <span class="token string">"bob"</span><span class="token punctuation">,</span> <span class="token string">"jane"</span><span class="token punctuation">,</span> <span class="token string">"doe"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> name_list <span class="token operator">=</span> names
    <span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>name<span class="token closure-punctuation punctuation">|</span></span> name<span class="token punctuation">.</span><span class="token function">starts_with</span><span class="token punctuation">(</span><span class="token char string">'j'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>name<span class="token closure-punctuation punctuation">|</span></span> <span class="token macro property">rsx!</span><span class="token punctuation">(</span> li <span class="token punctuation">{</span> <span class="token string">"{name}"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>render()</code> 方法非常高效，所以最好的做法是让它为我们完成大部分的工作。</p>
<h2 id="%E5%88%97%E8%A1%A8%E9%94%AE">列表键<a class="anchor" href="#%E5%88%97%E8%A1%A8%E9%94%AE">§</a></h2>
<p>在很多需要对列表 <code>增删改查</code> 的情况下，我们需要对列表的每一项提供一个 <code>键</code> 让它可被 Dioxus 识别。
否则你将不知道哪行对应的是哪条数据了。</p>
<pre class="language-autoit"><code class="language-autoit">rsx!<span class="token punctuation">(</span> li { key<span class="token punctuation">:</span> <span class="token string">"a"</span> } <span class="token punctuation">)</span>
</code></pre>
<p>设置一个便于识别的键可帮助 Dioxus 更好的分辨它，并提供相应的反馈。</p>
<h3 id="%E4%B8%BA%E4%BB%80%E4%B9%88-dioxus-%E9%9C%80%E8%A6%81%E9%94%AE">为什么 Dioxus 需要键？‘<a class="anchor" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-dioxus-%E9%9C%80%E8%A6%81%E9%94%AE">§</a></h3>
<p>如果一个列表了没有唯一标识（我们也可称之为索引），那我们无法确定哪条数据对应哪些东西。
这就很象我们常用的 HashMap ，只有拥有 <code>Key</code> 我们才能快速明白对应关系。而不是像 Vec 一样删除一条数据其他都乱了。</p>
<p>注意，键只会被 Dioxus 私下使用。</p>
<pre class="language-autoit"><code class="language-autoit">Post { key<span class="token punctuation">:</span> <span class="token string">"{key}"</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token string">"{id}"</span> }
</code></pre></article></div><aside class="main_toc_container nav_link_container"><div class="main_toc"><nav class="toc"><ol><li><a href="#%E9%80%9A%E8%BF%87%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93">通过列表渲染</a></li><li><a href="#%E8%BF%87%E6%BB%A4%E8%BF%AD%E4%BB%A3%E5%99%A8">过滤迭代器</a></li><li><a href="#%E5%88%97%E8%A1%A8%E9%94%AE">列表键</a><ol><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88-dioxus-%E9%9C%80%E8%A6%81%E9%94%AE">为什么 Dioxus 需要键？‘</a></li></ol></li></ol></nav></div></aside></section><footer>Powered by&amp;nbsp;<a href="https://github.com/xcatliu/pagic" target="_blank">Pagic</a></footer><div class="tools flex_center hide_on_mobile"><a class="czs-angle-up-l button" href="#" style="background-image:url(&quot;/assets/czs-angle-up-l.svg&quot;)"></a></div><script src="https://cdn.pagic.org/react@17.0.2/umd/react.production.min.js"></script><script src="https://cdn.pagic.org/react-dom@17.0.2/umd/react-dom.production.min.js"></script><script type="module" src="/index.js"></script></body></html>